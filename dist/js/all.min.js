angular.module("myApp",["ionic","myApp.urls","myApp.httpFactory","myApp.slideBox","myApp.tabs","myApp.news","myApp.live","myApp.theme","myApp.personal","myApp.newsSummary","myApp.login","myApp.setting","myApp.news1","myApp.news2"]).config(["$stateProvider","$urlRouterProvider",function(e,n){e.state("tabs",{url:"/tabs",abstract:!0,templateUrl:"tabs.html",controller:"tabsController"}),n.otherwise("tabs/news")}]),angular.module("myApp.live",[]).config(["$stateProvider","$urlRouterProvider",function(e,n){e.state("tabs.live",{url:"/live",views:{"tabs-live":{templateUrl:"live.html",controller:"liveController"}}})}]).controller("liveController",["$scope","$sce","$ionicLoading","HttpFactory",function(e,n,t,o){e.show=function(){t.show({template:"Loading..."})},e.hide=function(){t.hide()},e.show(),e.live={slideSource:[]};var r="http://data.live.126.net/livechannel/previewlist.json";o.getData(r).then(function(n){e.hide();var t=[];if(n.top.length){for(var o=0;o<n.top.length;o++){var r={title:n.top[o].roomName,imgsrc:n.top[o].image};t.push(r)}console.log(t),e.live.slideSource=t}});var r="http://data.live.126.net/livechannel/previewlist.json";o.getData(r).then(function(n){e.lives=n.sublives,e.loves=n.live_review,e.likes=n.future,console.log(e.likes)})}]),angular.module("myApp.login",[]).config(["$stateProvider","$urlRouterProvider",function(e,n){e.state("login",{url:"/login",templateUrl:"login.html",controller:"loginController"})}]).controller("loginController",["$scope",function(e){}]),angular.module("myApp.news",[]).config(["$stateProvider","$urlRouterProvider",function(e,n){e.state("tabs.news",{url:"/news",views:{"tabs-news":{templateUrl:"news.html",controller:"newsController"}}}).state("tabs.search",{url:"/search",views:{"tabs-news":{templateUrl:"search.html"}}})}]).controller("newsController",["$scope","$ionicPopup","$ionicSlideBoxDelegate","$ionicViewSwitcher","$state","HttpFactory",function(e,n,t,o,r,s){var a="http://c.m.163.com/nc/topicset/ios/subscribe/manage/listspecial.html";s.getData(a).then(function(n){e.tous=n.tList,console.log(e.tous)}),e.news={newsArray:[],adsArray:[],index:0,isFirst:!0},e.goToDetailView=function(){},e.$on("updateNews0",function(n,t){e.news.adsArray=[],e.news.newsArray=[],e.news.index=0,console.log("view0,"+t),"清理"!=t&&e.loadMore(UrlArray[t])}),e.loadMore=function(n){e.show();var t="";n?(t=n,t=t.replace("@",e.news.index)):t="http://c.m.163.com/recommend/getSubDocPic?from=toutiao&prog=LMA1&open=&openpath=&fn=1&passport=&devId=%2BnrKMbpU9ZDPUOhb9gvookO3HKJkIOzrIg%2BI9FhrLRStCu%2B7ZneFbZ30i61TL9kY&offset="+e.news.index+"&size=10&version=17.1&spever=false&net=wifi&lat=&lon=&ts=1480666192&sign=yseE2FNVWcJVjhvP48U1nPHyzZCKpBKh%2BaOhOE2d6GR48ErR02zJ6%2FKXOnxX046I&encryption=1&canal=appstore",0===e.news.index?e.news.index+=11:e.news.index+=10,s.getData(t).then(function(n){if(e.hide(),!n)return void alert("没有更多数据!");if(e.news.adsArray.length||n[0].ads&&(e.news.adsArray=n[0].ads),e.news.newsArray=e.news.newsArray.concat(n),0===e.news.index&&e.news.newsArray.splice(0,1),e.$broadcast("scroll.infiniteScrollComplete"),e.news.isFirst)for(var t=3;t<UrlArray.length;t++)s.getData(UrlArray[t])},function(){e.hide()})},e.doRefresh=function(n){console.log(11111);var t="";n?(t=n,t=t.replace("@",e.news.index)):t="http://c.m.163.com/recommend/getSubDocPic?from=toutiao&prog=LMA1&open=&openpath=&fn=1&passport=&devId=%2BnrKMbpU9ZDPUOhb9gvookO3HKJkIOzrIg%2BI9FhrLRStCu%2B7ZneFbZ30i61TL9kY&offset="+e.news.index+"&size=10&version=17.1&spever=false&net=wifi&lat=&lon=&ts=1480666192&sign=yseE2FNVWcJVjhvP48U1nPHyzZCKpBKh%2BaOhOE2d6GR48ErR02zJ6%2FKXOnxX046I&encryption=1&canal=appstore",s.getData(t).then(function(n){return n?(e.news.adsArray.length||n[0].ads&&(e.news.adsArray=n[0].ads),e.news.newsArray=n,0===e.news.index&&e.news.newsArray.splice(0,1),void e.$broadcast("scroll.refreshComplete")):void alert("没有更多数据!")})},e.dragOpenSlide=function(){t.$getByHandle("mainSlideBox").enableSlide(!0)},e.slideChanged=function(){t.$getByHandle("mainSlideBox").enableSlide(!1)},e.goToNewsDetail=function(n){console.log(n);var t=e.items1[n].docid;r.go("newsSummary",{data:t}),o.nextDirection("back")}}]),angular.module("myApp.news1",[]).controller("newsController1",["$scope","$ionicPopup","$ionicSlideBoxDelegate","$state","HttpFactory","UrlArray",function(e,n,t,o,r,s){e.news={newsArray1:[],adsArray1:[],index:0},e.$on("updateNews1",function(n,t){e.news.adsArray1=[],e.news.newsArray1=[],e.news.index=0,console.log("view1,"+t),"清理"!=t&&e.loadMore1(s[t])}),e.loadMore1=function(n){var t="";n?(t=n,t=t.replace("@",e.news.index)):t="http://c.m.163.com/dlist/article/dynamic?from=T1348648517839&offset="+e.news.index+"&size=10&fn=7&passport=&devId=XTl7WnrkEuBfasUNdPC49g%3D%3D&lat=&lon=&version=17.2&net=wifi&ts=1480639275&sign=ENAtFozNgGugOq3e1UL6hWbkeBqF24b8ECZ%2FOg2OGlZ48ErR02zJ6%2FKXOnxX046I&encryption=1&canal=oppo_store2014_news&mac=0qxu7nRwUAReuUxKr3NiFzDz%2FWJ7EEOtyLA2BsvQqp8%3D",0===e.news.index?e.news.index+=11:e.news.index+=10,r.getData(t).then(function(n){return n?(e.news.adsArray1.length||n[0].ads&&(e.news.adsArray1=n[0].ads),e.news.newsArray1=e.news.newsArray1.concat(n),0===e.news.index&&e.news.newsArray1.splice(0,1),void e.$broadcast("scroll.infiniteScrollComplete")):void alert("没有更多数据!")})}}]),angular.module("myApp.news2",[]).controller("newsController2",["$scope","$ionicPopup","$ionicSlideBoxDelegate","$state","HttpFactory","UrlArray",function(e,n,t,o,r,s){e.news={newsArray2:[],adsArray2:[],index:0},e.$on("updateNews2",function(n,t){e.news.adsArray2=[],e.news.newsArray2=[],e.news.index=0,console.log("view2,"+t),"清理"!=t&&e.loadMore2(s[t])}),e.loadMore2=function(n){var t="";n?(t=n,t=t.replace("@",e.news.index)):t="http://c.m.163.com/recommend/getChanListNews?channel=T1456112189138&size=10&offset="+e.news.index+"&fn=2&passport=&devId=XTl7WnrkEuBfasUNdPC49g%3D%3D&lat=&lon=&version=17.2&net=wifi&ts=1480640855&sign=n%2BRpzwR4DEI0MaavyBhQlpZaxlFxQdWjn0Ty7qOYWaB48ErR02zJ6%2FKXOnxX046I&encryption=1&canal=oppo_store2014_news&mac=0qxu7nRwUAReuUxKr3NiFzDz%2FWJ7EEOtyLA2BsvQqp8%3D",0===e.news.index?e.news.index+=11:e.news.index+=10,r.getData(t).then(function(n){return n?(e.news.adsArray2.length||n[0].ads&&(e.news.adsArray2=n[0].ads),e.news.newsArray2=e.news.newsArray2.concat(n),0===e.news.index&&e.news.newsArray2.splice(0,1),void e.$broadcast("scroll.infiniteScrollComplete")):void alert("没有更多数据!")})}}]),angular.module("myApp.newsSummary",[]).config(["$stateProvider","$urlRouterProvider",function(e,n){e.state("newsSummary",{url:"/newsSummary",templateUrl:"newsSummary.html",controller:"newsSummaryController",params:{data:null}})}]).controller("newsSummaryController",["$scope","$sce","$stateParams","$ionicPopup","$ionicLoading","$timeout","HttpFactory",function(e,n,t,o,r,s,a){e.show=function(){r.show({template:"Loading..."})},e.hide=function(){r.hide()},e.show(),e.newsSummary={detail:"",body:""};var i=t.data,l="http://localhost:3000/?myUrl=http://c.m.163.com/nc/article/"+i+"/full.html";a.getData(l).then(function(n){e.hide(),e.newsSummary.detail=n[i];var t=e.newsSummary.detail;if(t.img&&t.img.length)for(var o=0;o<t.img.length;o++){var r=t.img[o].pixel.split("*")[0];r>document.body.offsetWidth&&(r=document.body.offsetWidth);var s="width:"+r+"px",a="<img style='"+s+"' src="+t.img[o].src+">";t.body=t.body.replace(t.img[o].ref,a)}}),e.goShare=function(){var e=o.alert({title:"分享领红包",template:'<div class="tan"><a class="button button-clear"><i class="button icon ion-chatbubbles"><span>微信</span></i></a><a class="button button-clear"><i class="button icon ion-aperture">友圈</i></a><a class="button button-clear"><i class="button icon ion-ios-star">收藏</i></a><a class="button button-clear"><i class="button icon ion-social-chrome"><span>空间</span></i></a><a class="button button-clear"><i class="button icon ion-ios-email"><span>邮箱</span></i></a><a class="button button-clear"><i class="button icon ion-android-more-vertical"><span>更多</span></i></a></div>'});e.then(function(e){})}}]),angular.module("myApp.personal",[]).config(["$stateProvider","$urlRouterProvider",function(e,n){e.state("tabs.personal",{url:"/personal",views:{"tabs-personal":{templateUrl:"personal.html",controller:"personalController"}}})}]).controller("personalController",["$scope","$ionicActionSheet",function(e,n){e.show=function(){n.show({buttons:[{text:"<b>Share</b> This"},{text:"离开"}],destructiveText:"Delete",titleText:"Modify your album",cancelText:"签到",cancel:function(){},buttonClicked:function(e){return!0}})}}]),angular.module("myApp.setting",[]).config(["$stateProvider","$urlRouterProvider",function(e,n){e.state("setting",{url:"/setting",templateUrl:"setting.html",controller:"settingController"})}]).controller("settingController",["$scope","$ionicBackdrop",function(e,n){var t=1;e.Change=function(){t++,t%2==0?n.retain():n.release()}}]),angular.module("myApp.tabs",[]).controller("tabsController",["$scope",function(e){}]),angular.module("myApp.theme",[]).config(["$stateProvider","$urlRouterProvider",function(e,n){e.state("tabs.theme",{url:"/theme",views:{"tabs-theme":{templateUrl:"theme.html",controller:"themeController"}}})}]).controller("themeController",["$scope","HttpFactory",function(e,n){var t="http://c.m.163.com/newstopic/list/classification.html";n.getData(t).then(function(n){e.items2=n.data});var o=document.querySelector("#row"),r=document.querySelector(".float");r.onclick=function(){"300px"==o.style.height?(o.style.height="100px",r.style.transform="rotate(0deg)"):(o.style.height="300px",r.style.transform="rotate(180deg)")};var t="http://c.m.163.com/newstopic/list/expert/5YyX5Lqs/0-10.html";n.getData(t).then(function(n){e.its=n.data.expertList,console.log(n)})}]),angular.module("myApp.httpFactory",[]).factory("HttpFactory",["$http","$q",function(e,n){return{getData:function(t,o){if(t){var r=n.defer();return t="http://59.110.139.104:3000/wy?myUrl="+encodeURIComponent(t),o=o?o:"GET",e({url:t,method:o,timeout:2e4}).then(function(e){e=e.data,r.resolve(e)},function(e){r.reject(e)}),r.promise}}}}]),angular.module("myApp.slideBox",[]).directive("mgSlideBox",[function(){return{restrict:"E",scope:{sourceArray:"="},template:'<div class="topCarousel"><ion-slide-box delegate-handle="topCarouselSlideBox" on-slide-changed="slideHasChanged($index)" auto-play="true" slide-interval="1000" show-pager="true" does-continue="true" ng-if="isShowSlideBox" on-drag="drag($event)"> <ion-slide ng-repeat="ads in sourceArray track by $index" ng-click="goToDetailView($index)"><img ng-src="{{ads.imgsrc}}" class="topCarouselImg"></ion-slide> </ion-slide-box><div class="slideBottomDiv"></div></div>',controller:["$scope","$element","$ionicSlideBoxDelegate",function(e,n,t){e.goToDetailView=function(e){console.log("进入详情页"+e)};var o=n[0].lastElementChild;e.$watch("sourceArray",function(n,t){n&&n.length&&(e.isShowSlideBox=!0)}),e.slideHasChanged=function(n){o.innerText=e.sourceArray[n].title},t.$getByHandle("mainSlideBox").enableSlide(!1),e.drag=function(e){t.$getByHandle("mainSlideBox").enableSlide(!1),e.stopPropagation()}}],replace:!0,link:function(e,n,t){}}}]),angular.module("myApp.urls",[]).constant("UrlArray",["http://c.m.163.com/recommend/getSubDocPic?from=toutiao&prog=LMA1&open=&openpath=&fn=1&passport=&devId=%2BnrKMbpU9ZDPUOhb9gvookO3HKJkIOzrIg%2BI9FhrLRStCu%2B7ZneFbZ30i61TL9kY&offset=@&size=10&version=17.1&spever=false&net=wifi&lat=&lon=&ts=1480666192&sign=yseE2FNVWcJVjhvP48U1nPHyzZCKpBKh%2BaOhOE2d6GR48ErR02zJ6%2FKXOnxX046I&encryption=1&canal=appstore","http://c.m.163.com/dlist/article/dynamic?from=T1348648517839&offset=@&size=10&fn=7&passport=&devId=XTl7WnrkEuBfasUNdPC49g%3D%3D&lat=&lon=&version=17.2&net=wifi&ts=1480639275&sign=ENAtFozNgGugOq3e1UL6hWbkeBqF24b8ECZ%2FOg2OGlZ48ErR02zJ6%2FKXOnxX046I&encryption=1&canal=oppo_store2014_news&mac=0qxu7nRwUAReuUxKr3NiFzDz%2FWJ7EEOtyLA2BsvQqp8%3D","http://c.m.163.com/recommend/getChanListNews?channel=T1456112189138&size=10&offset=@&fn=2&passport=&devId=XTl7WnrkEuBfasUNdPC49g%3D%3D&lat=&lon=&version=17.2&net=wifi&ts=1480640855&sign=n%2BRpzwR4DEI0MaavyBhQlpZaxlFxQdWjn0Ty7qOYWaB48ErR02zJ6%2FKXOnxX046I&encryption=1&canal=oppo_store2014_news&mac=0qxu7nRwUAReuUxKr3NiFzDz%2FWJ7EEOtyLA2BsvQqp8%3D","http://c.m.163.com/dlist/article/dynamic?from=T1348649079062&offset=@&size=10&fn=2&passport=&devId=XTl7WnrkEuBfasUNdPC49g%3D%3D&lat=&lon=&version=17.2&net=wifi&ts=1480639446&sign=cZqFpGcYxIM23Mk0zlBq8ziD1sRlb1GqZlwcRLb38aZ48ErR02zJ6%2FKXOnxX046I&encryption=1&canal=oppo_store2014_news&mac=0qxu7nRwUAReuUxKr3NiFzDz%2FWJ7EEOtyLA2BsvQqp8%3D","http://c.m.163.com/recommend/getSubDocPic?from=netease_h&size=10&offset=@&fn=4&passport=&devId=XTl7WnrkEuBfasUNdPC49g%3D%3D&lat=&lon=&version=17.2&net=wifi&ts=1480639599&sign=JIfO0JDD%2Bn9%2BAUDPwiCVNSwML5QPD%2BO1KSZcsmDfw2948ErR02zJ6%2FKXOnxX046I&encryption=1&canal=oppo_store2014_news&mac=0qxu7nRwUAReuUxKr3NiFzDz%2FWJ7EEOtyLA2BsvQqp8%3D","http://c.m.163.com/dlist/article/local/dynamic?from=6YOR5bee&offset=@&size=10&fn=2&passport=&devId=XTl7WnrkEuBfasUNdPC49g%3D%3D&lat=&lon=&version=17.2&net=wifi&ts=1480639679&sign=fibH0nYFS5ZqfhTkz%2Fctkn1b%2B%2B7UaCWuMhwPOm2XAxN48ErR02zJ6%2FKXOnxX046I&encryption=1&canal=oppo_store2014_news&mac=0qxu7nRwUAReuUxKr3NiFzDz%2FWJ7EEOtyLA2BsvQqp8%3D","http://c.m.163.com/recommend/getChanListNews?channel=T1457068979049&size=10&offset=@&fn=2&passport=&devId=XTl7WnrkEuBfasUNdPC49g%3D%3D&lat=&lon=&version=17.2&net=wifi&ts=1480639724&sign=uklrBnfDnFoSS86%2B44xw0tzktOhz8ek4D2b6Uh0bXk148ErR02zJ6%2FKXOnxX046I&encryption=1&canal=oppo_store2014_news&mac=0qxu7nRwUAReuUxKr3NiFzDz%2FWJ7EEOtyLA2BsvQqp8%3D","http://c.m.163.com/dlist/article/dynamic?from=T1348648756099&offset=@&size=10&fn=2&passport=&devId=XTl7WnrkEuBfasUNdPC49g%3D%3D&lat=&lon=&version=17.2&net=wifi&ts=1480639780&sign=PqlXEtC2KZaOX7vOO17uHuo4duhmWIxQqoQ4rBKRsQh48ErR02zJ6%2FKXOnxX046I&encryption=1&canal=oppo_store2014_news&mac=0qxu7nRwUAReuUxKr3NiFzDz%2FWJ7EEOtyLA2BsvQqp8%3D","http://c.m.163.com/dlist/article/dynamic?from=T1348649580692&offset=@&size=10&fn=2&passport=&devId=XTl7WnrkEuBfasUNdPC49g%3D%3D&lat=&lon=&version=17.2&net=wifi&ts=1480639824&sign=BENvYqDl9cYKiJh2irUV5%2Biue8PV%2FKHdFs3tQWGzBqd48ErR02zJ6%2FKXOnxX046I&encryption=1&canal=oppo_store2014_news&mac=0qxu7nRwUAReuUxKr3NiFzDz%2FWJ7EEOtyLA2BsvQqp8%3D","http://c.m.163.com/dlist/article/dynamic?from=T1348650593803&offset=@&size=10&fn=1&passport=&devId=XTl7WnrkEuBfasUNdPC49g%3D%3D&lat=&lon=&version=17.2&net=wifi&ts=1480639994&sign=L2rYDnEjMRXqgyoBwjDOU9%2FuAlHKEvkGbCcbOw0egKp48ErR02zJ6%2FKXOnxX046I&encryption=1&canal=oppo_store2014_news&mac=0qxu7nRwUAReuUxKr3NiFzDz%2FWJ7EEOtyLA2BsvQqp8%3D","http://c.m.163.com/recommend/getChanListNews?channel=T1419316284722&size=10&offset=@&fn=1&passport=&devId=XTl7WnrkEuBfasUNdPC49g%3D%3D&lat=&lon=&version=17.2&net=wifi&ts=1480640349&sign=kuB1wmMK3BIofo29zp1u%2FCelBxwQVclBPY2jLDS6PfV48ErR02zJ6%2FKXOnxX046I&encryption=1&canal=oppo_store2014_news&mac=0qxu7nRwUAReuUxKr3NiFzDz%2FWJ7EEOtyLA2BsvQqp8%3D","http://c.m.163.com/dlist/article/dynamic?from=T1473054348939&offset=@&size=10&fn=2&passport=&devId=XTl7WnrkEuBfasUNdPC49g%3D%3D&lat=&lon=&version=17.2&net=wifi&ts=1480640251&sign=TxI1npNtFDs5QSgpQr%2FOTwXPVB%2FvuqHD5Vj7E5Ul5t948ErR02zJ6%2FKXOnxX046I&encryption=1&canal=oppo_store2014_news&mac=0qxu7nRwUAReuUxKr3NiFzDz%2FWJ7EEOtyLA2BsvQqp8%3D","http://c.m.163.com/dlist/article/dynamic?from=T1348648141035&offset=@&size=10&fn=1&passport=&devId=XTl7WnrkEuBfasUNdPC49g%3D%3D&lat=&lon=&version=17.2&net=wifi&ts=1480640432&sign=LeTem6ZlcSys0TMWqSD%2FkavFP%2BW7CKnHNX3zs%2B6m3l548ErR02zJ6%2FKXOnxX046I&encryption=1&canal=oppo_store2014_news&mac=0qxu7nRwUAReuUxKr3NiFzDz%2FWJ7EEOtyLA2BsvQqp8%3D","http://c.m.163.com/dlist/article/dynamic?from=T1348654151579&offset=@&size=10&fn=1&passport=&devId=XTl7WnrkEuBfasUNdPC49g%3D%3D&lat=&lon=&version=17.2&net=wifi&ts=1480640614&sign=Ey6%2F0Qyd7pxjaaWUoZLQYriGwqX0xzmATqe6CpZ0C2x48ErR02zJ6%2FKXOnxX046I&encryption=1&canal=oppo_store2014_news&mac=0qxu7nRwUAReuUxKr3NiFzDz%2FWJ7EEOtyLA2BsvQqp8%3D","http://c.m.163.com/dlist/article/dynamic?from=T1414389941036&offset=@&size=10&fn=1&passport=&devId=XTl7WnrkEuBfasUNdPC49g%3D%3D&lat=&lon=&version=17.2&net=wifi&ts=1480640649&sign=DXY4efOR3JOAgU6ePvFftxYD41PHsjGxZdWGM5quV0x48ErR02zJ6%2FKXOnxX046I&encryption=1&canal=oppo_store2014_news&mac=0qxu7nRwUAReuUxKr3NiFzDz%2FWJ7EEOtyLA2BsvQqp8%3D","http://c.m.163.com/dlist/article/dynamic?from=T1348649145984&offset=@&size=10&fn=2&passport=&devId=XTl7WnrkEuBfasUNdPC49g%3D%3D&lat=&lon=&version=17.2&net=wifi&ts=1480641094&sign=m32ovzEGXTpUeq0kQ%2BXNMNXg9B6bGu2D0vfF3xrFwjF48ErR02zJ6%2FKXOnxX046I&encryption=1&canal=oppo_store2014_news&mac=0qxu7nRwUAReuUxKr3NiFzDz%2FWJ7EEOtyLA2BsvQqp8%3D"]);